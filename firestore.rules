rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {

    // REGRA DE DESENVOLVIMENTO: Acesso total para o 'dev-oficina-id'
    // Esta regra concede permissão de leitura e escrita a todos os documentos
    // e sub-coleções dentro da oficina de desenvolvimento para resolver os
    // erros de permissão e desbloquear o desenvolvimento.
    match /oficinas/dev-oficina-id/{document=**} {
      allow read, write: if true;
    }

    // As regras de produção, mais restritivas, seriam aplicadas a outras
    // oficinas, mas não interferirão no ambiente de desenvolvimento.
    // Por enquanto, negamos o acesso a qualquer outra oficina para segurança.
    match /oficinas/{oficinaId}/{document=**} {
        allow read, write: if false;
    }
  }
}
